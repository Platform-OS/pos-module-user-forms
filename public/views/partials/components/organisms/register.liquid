---
metadata:
  name: register form
  params:
    action: ''
    method: 'POST'
    redirect_to: '/'
    errors:
      - field_name: "email"
      - error: "Error message"
    values:
      - field_name: "email"
      - value: "random@example.com"
---
{% liquid
  assign action = params.action | default: '/users/register'
  assign method = params.method | default: 'POST'
  assign redirect_to = params.redirect_to | default: '/'
%}

<form action="/users/register" method="post" class="w-full mx-auto card-lg md:w-96" data-tc="register-user">
  {% render 'authenticity_token' %}

  {% for field in registration_fields %}
    {% if field.type == 'select' %}
      <fieldset>
        <label for="{{ field.name }}">{{ field.label }}</label>
        <select id="{{ field.name }}" name="{{ field.name }}">
          {% for option in field.options %}
            <option value="{{ option.value }}">{{ option.title }}</option>
          {% endfor %}
        </select>
      </fieldset>
      {% continue  %}
    {% endif %}
    <fieldset>
      <label for="{{ field.name }}">{{ field.label }}</label>
      <input name="{{ field.name }}" type="{{ field.type }}" id="{{ field.name }}" value="{{ object[field.name] | raw_escape_string }}" {% if field.required %} required {% endif %}>
      {% render 'theme/simple/field_error', errors: object.errors[field.name] %}
    </fieldset>
  {% endfor %}

  {% render 'hcaptcha', object: object %}

  <fieldset class="mt-5">
    <button class="mt-3 button" type="submit">{{ 'app.users.form.signup' | t }}</button>
  </fieldset>
</form>
